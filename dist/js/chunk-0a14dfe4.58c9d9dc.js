(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a14dfe4"],{"16b4":function(e,t,a){"use strict";var n=a("2add"),r=a.n(n);r.a},"2add":function(e,t,a){},"2bb0":function(e,t,a){"use strict";a.r(t);var n,r,s,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{"left-text":"添加任务","left-arrow":""},on:{"click-left":e.onNavBarClickLeft}}),a("van-field",{attrs:{clearable:"",label:"任务名称",placeholder:"请输入任务名称"},on:{input:e.onTaskTitleInput},model:{value:e.task.title,callback:function(t){e.$set(e.task,"title",t)},expression:"task.title"}}),a("van-field",{attrs:{clearable:"",label:"任务详情",autosize:"",type:"textarea",placeholder:"请输入任务详情"},on:{input:e.onTaskDetailInput},model:{value:e.task.detail,callback:function(t){e.$set(e.task,"detail",t)},expression:"task.detail"}}),a("van-cell",{attrs:{title:"提醒时间",value:new Date(e.task.alarmTime).toLocaleString(),"is-link":""},on:{click:e.onTaskAlarmClick}}),a("van-cell",{attrs:{title:"任务标签",center:"","value-class":"task-label-value"}},[a("van-icon",{attrs:{slot:"right-icon",name:"add-o",size:20},on:{click:e.onAddTaskLabelClick},slot:"right-icon"}),e._l(e.task.label,(function(t){return a("van-tag",{key:t,staticClass:"task-label",attrs:{type:"primary",mark:""}},[e._v(e._s(t))])}))],2),a("van-button",{staticClass:"position-bottom",attrs:{size:"large",type:"primary"},on:{click:e.onCreateTaskClick}},[e._v("添加")]),a("van-popup",{attrs:{round:"","close-icon-position":"top-left",position:"bottom",closeable:""},model:{value:e.isAlarmPopup,callback:function(t){e.isAlarmPopup=t},expression:"isAlarmPopup"}},[a("van-datetime-picker",{attrs:{type:"datetime",formatter:e.dateTimeFormatter,"min-date":e.minDateTime,"max-date":e.maxDateTime},on:{confirm:e.onDateTimeConfirm},model:{value:e.currentDateTime,callback:function(t){e.currentDateTime=t},expression:"currentDateTime"}})],1),a("van-popup",{staticStyle:{"background-color":"unset"},attrs:{position:"center"},model:{value:e.isLabelPopup,callback:function(t){e.isLabelPopup=t},expression:"isLabelPopup"}},[a("div",{staticClass:"task-label-popup"},[a("van-field",{attrs:{clearable:"",placeholder:"请输入标签"},on:{input:e.onTaskLabelInput},model:{value:e.taskLabel,callback:function(t){e.taskLabel=t},expression:"taskLabel"}}),a("br"),a("van-button",{attrs:{size:"large",type:"primary"},on:{click:e.onAddTaskBtnClick}},[e._v("添加")])],1)])],1)},c=[],o=(a("99af"),a("a15b"),a("b0c0"),a("96cf"),a("1da1")),l=a("ade3"),u=a("2b0e"),d=a("ee83"),p=(a("d1cf"),a("a3e2")),m=(a("5f1a"),a("d399")),k=(a("e7e5"),a("4862")),b=a("5c41"),f=a("93f3"),v=a("9f48"),h=new Date("".concat((new Date).toLocaleDateString()," 00:00:00"));(function(e){e["year"]="year",e["month"]="month",e["day"]="day",e["hour"]="hour",e["minute"]="minute"})(s||(s={}));var g=(n={},Object(l["a"])(n,s.year,"年"),Object(l["a"])(n,s.month,"月"),Object(l["a"])(n,s.day,"日"),Object(l["a"])(n,s.hour,"时"),Object(l["a"])(n,s.minute,"分"),n),T=u["a"].extend({name:"addTask",data:function(){return{isAlarmTimePopup:!1,isLabelPopup:!1,task:new b["a"](h.getTime(),"",[],f["f"].pending,""),taskLabel:"",currentDateTime:h,minDateTime:h,maxDateTime:new Date(h.getTime()+5184e5)}},methods:{dateTimeFormatter:function(e,t){return"".concat(t).concat(g[e])},onCreateTaskClick:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,s=null===(a=e.task)||void 0===a||null===(n=a.label)||void 0===n?void 0:n.join("#"),i=null===(r=e.task)||void 0===r?void 0:r.validate(h.getTime()),!i){t.next=5;break}throw new v["a"](i);case 5:return t.next=7,k["a"].addTask(Object.assign({},e.task,{label:s}));case 7:c=t.sent,Object(m["a"])(c.code===f["e"].success?"添加成功":c.msg),c.code===f["e"].success&&setTimeout((function(){return e.$router.back()}),2e3),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0),t.t0 instanceof v["a"]&&Object(m["a"])(t.t0.msg);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},onTaskTitleInput:function(e){this.task.title=e},onTaskDetailInput:function(e){this.task.detail=e},onTaskAlarmClick:function(){this.isAlarmTimePopup=!0},onDateTimeConfirm:function(e){this.isAlarmTimePopup=!1,this.task.alarmTime=e.getTime()},onTaskLabelInput:function(e){this.taskLabel=e},onAddTaskLabelClick:function(){this.isLabelPopup=!0},onAddTaskBtnClick:function(){this.isLabelPopup=!1,this.task.label.push(this.taskLabel),this.taskLabel=""}},components:(r={},Object(l["a"])(r,d["a"].name,d["a"]),Object(l["a"])(r,p["a"].name,p["a"]),r)}),x=T,w=(a("16b4"),a("2877")),j=Object(w["a"])(x,i,c,!1,null,"95d7b290",null);t["default"]=j.exports},4862:function(e,t,a){"use strict";a("d3b7"),a("96cf");var n=a("1da1"),r=(a("99af"),a("79f6")),s=a("0889"),i="".concat(r["a"],"/task"),c=function(e){return s["a"].post(i,e)},o=function(){return s["a"].get(i)},l=function(e){return s["a"].get("".concat(i,"/").concat(e))},u=function(e){return s["a"].delete("".concat(i,"/").concat(e))},d=function(e){return s["a"].put("".concat(i),e)},p=a("d399"),m=(a("e7e5"),a("0613")),k=a("93f3"),b=a("9f48"),f=a("fc60");t["a"]={addTask:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c(e);case 3:if(a=t.sent,a.code!==k["e"].success){t.next=7;break}return t.next=7,m["a"].dispatch(f["a"].addTask,a.data);case 7:return t.abrupt("return",Promise.resolve({code:a.code,msg:a.msg}));case 10:return t.prev=10,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve({code:k["e"].fail,msg:""}));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},viewTasks:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:if(t=e.sent,t.code!==k["e"].success){e.next=7;break}return e.next=7,m["a"].dispatch(f["a"].updateTasks,t.data);case 7:return e.abrupt("return",Promise.resolve({code:t.code,msg:t.msg}));case 10:return e.prev=10,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return",Promise.resolve({code:k["e"].fail,msg:""}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},deleteTask:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u(e);case 3:if(a=t.sent,Object(p["a"])(a.msg),a.code===k["e"].success){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,m["a"].dispatch(f["a"].delTask,e);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),t.t0 instanceof b["a"]&&Object(p["a"])(t.t0.msg),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},refreshTask:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l(e);case 3:if(a=t.sent,a.code!==k["e"].success){t.next=7;break}return t.next=7,m["a"].dispatch(f["a"].updateTask,a.data);case 7:return t.abrupt("return",Promise.resolve({code:a.code,msg:a.msg}));case 10:return t.prev=10,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve({code:k["e"].fail,msg:""}));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},updateTaskStatus:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d({id:e,status:t});case 3:if(n=a.sent,n.code!==k["e"].success){a.next=7;break}return a.next=7,m["a"].dispatch(f["a"].updateTask,n.data);case 7:return a.abrupt("return",Promise.resolve({code:n.code,msg:n.msg}));case 10:return a.prev=10,a.t0=a["catch"](0),console.log(a.t0),a.abrupt("return",Promise.resolve({code:k["e"].fail,msg:""}));case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()}}},"5c41":function(e,t,a){"use strict";var n=a("d4ec"),r=a("bee2"),s=a("93f3"),i=function(){function e(t,a,r,i,c){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s["d"],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";Object(n["a"])(this,e),this.alarmTime=t,this.detail=a,this.label=r,this.status=i,this.title=c,this.ID=o,this.CreatedAt=l,this.DeletedAt=u,this.UpdatedAt=d}return Object(r["a"])(e,[{key:"validate",value:function(){return this.title?this.detail?"number"!==typeof(arguments.length<=0?void 0:arguments[0])?"请传入正确的时间":this.alarmTime===(arguments.length<=0?void 0:arguments[0])?"请选择提醒时间":"":"请输入任务详情":"请输入任务标题"}}]),e}();t["a"]=i}}]);
//# sourceMappingURL=chunk-0a14dfe4.58c9d9dc.js.map