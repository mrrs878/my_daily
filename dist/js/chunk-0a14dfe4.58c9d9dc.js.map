{"version":3,"sources":["webpack:///./src/views/task/AddTask.vue?229a","webpack:///./src/views/task/AddTask.vue?2d31","webpack:///./src/views/task/AddTask.vue","webpack:///./src/views/task/AddTask.vue?b100","webpack:///./src/views/task/AddTask.vue?0ea0","webpack:///./src/api/task.ts","webpack:///./src/module/task.ts","webpack:///./src/models/Task.ts"],"names":["DATE_TIME_TYPE","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onNavBarClickLeft","onTaskTitleInput","model","value","task","callback","$$v","$set","expression","onTaskDetailInput","Date","alarmTime","toLocaleString","onTaskAlarmClick","onAddTaskLabelClick","slot","_l","item","key","_v","_s","onCreateTaskClick","isAlarmPopup","dateTimeFormatter","minDateTime","maxDateTime","onDateTimeConfirm","currentDateTime","staticStyle","isLabelPopup","onTaskLabelInput","taskLabel","onAddTaskBtnClick","staticRenderFns","CURRENT_DATE_TIME","toLocaleDateString","DATE_TIME_FORMATTER","year","month","day","hour","minute","extend","name","data","isAlarmTimePopup","Task","getTime","pending","methods","type","val","label","join","msg","validate","ToastError","addTask","Object","assign","res","code","success","setTimeout","$router","back","console","log","e","title","detail","push","components","component","TASK_API","ajax","post","get","id","delete","put","store","dispatch","Promise","resolve","fail","viewTasks","updateTasks","deleteTask","delTask","refreshTask","updateTask","updateTaskStatus","status","createAt","deletedAt","updatedAt","ID","CreatedAt","DeletedAt","UpdatedAt"],"mappings":"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","file":"js/chunk-0a14dfe4.58c9d9dc.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddTask.vue?vue&type=style&index=0&id=95d7b290&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddTask.vue?vue&type=style&index=0&id=95d7b290&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('van-nav-bar',{attrs:{\"left-text\":\"添加任务\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onNavBarClickLeft}}),_c('van-field',{attrs:{\"clearable\":\"\",\"label\":\"任务名称\",\"placeholder\":\"请输入任务名称\"},on:{\"input\":_vm.onTaskTitleInput},model:{value:(_vm.task.title),callback:function ($$v) {_vm.$set(_vm.task, \"title\", $$v)},expression:\"task.title\"}}),_c('van-field',{attrs:{\"clearable\":\"\",\"label\":\"任务详情\",\"autosize\":\"\",\"type\":\"textarea\",\"placeholder\":\"请输入任务详情\"},on:{\"input\":_vm.onTaskDetailInput},model:{value:(_vm.task.detail),callback:function ($$v) {_vm.$set(_vm.task, \"detail\", $$v)},expression:\"task.detail\"}}),_c('van-cell',{attrs:{\"title\":\"提醒时间\",\"value\":new Date(_vm.task.alarmTime).toLocaleString(),\"is-link\":\"\"},on:{\"click\":_vm.onTaskAlarmClick}}),_c('van-cell',{attrs:{\"title\":\"任务标签\",\"center\":\"\",\"value-class\":\"task-label-value\"}},[_c('van-icon',{attrs:{\"slot\":\"right-icon\",\"name\":\"add-o\",\"size\":20},on:{\"click\":_vm.onAddTaskLabelClick},slot:\"right-icon\"}),_vm._l((_vm.task.label),function(item){return _c('van-tag',{key:item,staticClass:\"task-label\",attrs:{\"type\":\"primary\",\"mark\":\"\"}},[_vm._v(_vm._s(item))])})],2),_c('van-button',{staticClass:\"position-bottom\",attrs:{\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":_vm.onCreateTaskClick}},[_vm._v(\"添加\")]),_c('van-popup',{attrs:{\"round\":\"\",\"close-icon-position\":\"top-left\",\"position\":\"bottom\",\"closeable\":\"\"},model:{value:(_vm.isAlarmPopup),callback:function ($$v) {_vm.isAlarmPopup=$$v},expression:\"isAlarmPopup\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"datetime\",\"formatter\":_vm.dateTimeFormatter,\"min-date\":_vm.minDateTime,\"max-date\":_vm.maxDateTime},on:{\"confirm\":_vm.onDateTimeConfirm},model:{value:(_vm.currentDateTime),callback:function ($$v) {_vm.currentDateTime=$$v},expression:\"currentDateTime\"}})],1),_c('van-popup',{staticStyle:{\"background-color\":\"unset\"},attrs:{\"position\":\"center\"},model:{value:(_vm.isLabelPopup),callback:function ($$v) {_vm.isLabelPopup=$$v},expression:\"isLabelPopup\"}},[_c('div',{staticClass:\"task-label-popup\"},[_c('van-field',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入标签\"},on:{\"input\":_vm.onTaskLabelInput},model:{value:(_vm.taskLabel),callback:function ($$v) {_vm.taskLabel=$$v},expression:\"taskLabel\"}}),_c('br'),_c('van-button',{attrs:{\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":_vm.onAddTaskBtnClick}},[_vm._v(\"添加\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { DatetimePicker, Tag, Toast } from 'vant'\r\nimport TaskModule from '@/module/task'\r\nimport Task from '@/models/Task'\r\nimport { RES_CODE, TASK_STATUS } from '@/constant'\r\nimport ToastError from '@/models/ToastError'\r\n\r\nconst CURRENT_DATE_TIME = new Date(`${new Date().toLocaleDateString()} 00:00:00`)\r\nenum DATE_TIME_TYPE {\r\n  year = 'year',\r\n  month = 'month',\r\n  day = 'day',\r\n  hour = 'hour',\r\n  minute = 'minute'\r\n}\r\nconst DATE_TIME_FORMATTER = {\r\n  [DATE_TIME_TYPE.year]: '年',\r\n  [DATE_TIME_TYPE.month]: '月',\r\n  [DATE_TIME_TYPE.day]: '日',\r\n  [DATE_TIME_TYPE.hour]: '时',\r\n  [DATE_TIME_TYPE.minute]: '分'\r\n}\r\n\r\nexport default Vue.extend({\r\n  name: 'addTask',\r\n  data () {\r\n    return {\r\n      isAlarmTimePopup: false,\r\n      isLabelPopup: false,\r\n      task: new Task(CURRENT_DATE_TIME.getTime(), '', [], TASK_STATUS.pending, ''),\r\n      taskLabel: '',\r\n      currentDateTime: CURRENT_DATE_TIME,\r\n      minDateTime: CURRENT_DATE_TIME,\r\n      maxDateTime: new Date(CURRENT_DATE_TIME.getTime() + 1000 * 60 * 60 * 24 * 6)\r\n    }\r\n  },\r\n  methods: {\r\n    dateTimeFormatter (type: DATE_TIME_TYPE, val: string) {\r\n      return `${val}${DATE_TIME_FORMATTER[type]}`\r\n    },\r\n    async onCreateTaskClick () {\r\n      try {\r\n        const label = this.task?.label?.join('#')\r\n        const msg = this.task?.validate(CURRENT_DATE_TIME.getTime())\r\n        if (msg) throw new ToastError(msg)\r\n        const res = await TaskModule.addTask(Object.assign({}, this.task, { label }))\r\n        Toast(res.code === RES_CODE.success ? '添加成功' : res.msg)\r\n        if (res.code === RES_CODE.success) setTimeout(() => this.$router.back(), 2000)\r\n      } catch (e) {\r\n        console.log(e)\r\n        if (e instanceof ToastError) Toast(e.msg)\r\n      }\r\n    },\r\n    onTaskTitleInput (e: string) {\r\n      this.task.title = e\r\n    },\r\n    onTaskDetailInput (e: string) {\r\n      this.task.detail = e\r\n    },\r\n    onTaskAlarmClick () {\r\n      this.isAlarmTimePopup = true\r\n    },\r\n    onDateTimeConfirm (value: Date) {\r\n      this.isAlarmTimePopup = false\r\n      this.task.alarmTime = value.getTime()\r\n    },\r\n    onTaskLabelInput (value: string) {\r\n      this.taskLabel = value\r\n    },\r\n    onAddTaskLabelClick () {\r\n      this.isLabelPopup = true\r\n    },\r\n    onAddTaskBtnClick () {\r\n      this.isLabelPopup = false\r\n      this.task.label.push(this.taskLabel)\r\n      this.taskLabel = ''\r\n    }\r\n  },\r\n  components: {\r\n    [DatetimePicker.name]: DatetimePicker,\r\n    [Tag.name]: Tag\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddTask.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddTask.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddTask.vue?vue&type=template&id=95d7b290&scoped=true&\"\nimport script from \"./AddTask.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddTask.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddTask.vue?vue&type=style&index=0&id=95d7b290&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95d7b290\",\n  null\n  \n)\n\nexport default component.exports","import { BASE_API } from './index'\r\nimport { AjaxResponseI, UpdateTaskStatusReqT } from '@/interface/ajax'\r\nimport ajax from '@/util/ajax'\r\nimport { TaskI } from '@/interface/model'\r\n\r\nconst TASK_API = `${BASE_API}/task`\r\n\r\nexport const ADD_TASK = (data: TaskI): Promise<AjaxResponseI<string>> => ajax.post(TASK_API, data)\r\nexport const VIEW_TASKS = (): Promise<AjaxResponseI<Array<TaskI>>> => ajax.get(TASK_API)\r\nexport const VIEW_TASK = (id: number): Promise<AjaxResponseI<TaskI>> => ajax.get(`${TASK_API}/${id}`)\r\nexport const DEL_TASK = (id: number): Promise<AjaxResponseI<TaskI>> => ajax.delete(`${TASK_API}/${id}`)\r\nexport const UPDATE_TASK = (data: UpdateTaskStatusReqT): Promise<AjaxResponseI<TaskI>> => ajax.put(`${TASK_API}`, data)\r\n","import { ADD_TASK, VIEW_TASKS, DEL_TASK, UPDATE_TASK, VIEW_TASK } from '@/api/task'\r\nimport { TaskI } from '@/interface/model'\r\nimport { Toast } from 'vant'\r\nimport store from '@/store'\r\nimport { RES_CODE } from '@/constant'\r\nimport ToastError from '@/models/ToastError'\r\nimport { ACTIONS_E } from '@/store/actions'\r\n\r\nexport default {\r\n  async addTask (data: TaskI): Promise<ModuleRes> {\r\n    try {\r\n      const res = await ADD_TASK(data)\r\n      if (res.code === RES_CODE.success) {\r\n        await store.dispatch(ACTIONS_E.addTask, res.data)\r\n      }\r\n      return Promise.resolve({ code: res.code, msg: res.msg })\r\n    } catch (e) {\r\n      console.log(e)\r\n      return Promise.resolve({ code: RES_CODE.fail, msg: '' })\r\n    }\r\n  },\r\n  async viewTasks (): Promise<ModuleRes> {\r\n    try {\r\n      const res = await VIEW_TASKS()\r\n      if (res.code === RES_CODE.success) {\r\n        await store.dispatch(ACTIONS_E.updateTasks, res.data)\r\n      }\r\n      return Promise.resolve({ code: res.code, msg: res.msg })\r\n    } catch (e) {\r\n      console.log(e)\r\n      return Promise.resolve({ code: RES_CODE.fail, msg: '' })\r\n    }\r\n  },\r\n  async deleteTask (id: number) {\r\n    try {\r\n      const res = await DEL_TASK(id)\r\n      Toast(res.msg)\r\n      if (res.code !== RES_CODE.success) return\r\n      await store.dispatch(ACTIONS_E.delTask, id)\r\n    } catch (e) {\r\n      if (e instanceof ToastError) Toast(e.msg)\r\n      console.log(e)\r\n    }\r\n  },\r\n  async refreshTask (id: number): Promise<ModuleRes> {\r\n    try {\r\n      const res = await VIEW_TASK(id)\r\n      if (res.code === RES_CODE.success) {\r\n        await store.dispatch(ACTIONS_E.updateTask, res.data)\r\n      }\r\n      return Promise.resolve({ code: res.code, msg: res.msg })\r\n    } catch (e) {\r\n      console.log(e)\r\n      return Promise.resolve({ code: RES_CODE.fail, msg: '' })\r\n    }\r\n  },\r\n  async updateTaskStatus (id: number, status: number): Promise<ModuleRes> {\r\n    try {\r\n      const res = await UPDATE_TASK({ id, status })\r\n      if (res.code === RES_CODE.success) {\r\n        await store.dispatch(ACTIONS_E.updateTask, res.data)\r\n      }\r\n      return Promise.resolve({ code: res.code, msg: res.msg })\r\n    } catch (e) {\r\n      console.log(e)\r\n      return Promise.resolve({ code: RES_CODE.fail, msg: '' })\r\n    }\r\n  }\r\n}\r\n","import { TaskI } from '@/interface/model'\r\nimport { TASK_STATUS, INVALID_NUMBER } from '@/constant'\r\n\r\nclass Task implements TaskI {\r\n  alarmTime: number;\r\n  detail: string;\r\n  label: Array<string>;\r\n  status: TASK_STATUS;\r\n  title: string;\r\n  CreatedAt: string;\r\n  DeletedAt: string;\r\n  UpdatedAt: string;\r\n  ID: number;\r\n\r\n  constructor (alarmTime: number, detail: string, label: Array<string>, status: TASK_STATUS, title: string,\r\n    id = INVALID_NUMBER, createAt = '', deletedAt = '', updatedAt = '') {\r\n    this.alarmTime = alarmTime\r\n    this.detail = detail\r\n    this.label = label\r\n    this.status = status\r\n    this.title = title\r\n    this.ID = id\r\n    this.CreatedAt = createAt\r\n    this.DeletedAt = deletedAt\r\n    this.UpdatedAt = updatedAt\r\n  }\r\n\r\n  validate (...params: Array<any>) {\r\n    if (!this.title) return '请输入任务标题'\r\n    if (!this.detail) return '请输入任务详情'\r\n    if (typeof params[0] !== 'number') return '请传入正确的时间'\r\n    if (this.alarmTime === params[0]) return '请选择提醒时间'\r\n    return ''\r\n  }\r\n}\r\n\r\nexport default Task\r\n"],"sourceRoot":""}