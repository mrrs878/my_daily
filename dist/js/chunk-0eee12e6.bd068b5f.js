(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0eee12e6"],{"633d":function(e,t,r){"use strict";r("d3b7"),r("96cf");var n=r("1da1"),a=(r("99af"),r("79f6")),c=r("0889"),s="".concat(a["a"],"/auth"),o=function(e){return c["a"].post("".concat(s,"/login"),e)},u=function(e){return c["a"].post("".concat(s,"/register"),e)},i=function(e){return c["a"].get("".concat(s,"/github/").concat(e))},l=r("d399"),p=(r("e7e5"),r("93f3")),d=r("0613"),f=r("fc60"),m=r("2de2"),v=r("458f"),g=r("2ce0");t["a"]={login:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o(e);case 3:return n=r.sent,Object(l["a"])(n.msg),n.code===p["g"].success&&t.updateToken(n.data),r.abrupt("return",Promise.resolve(n.code===p["g"].success));case 9:return r.prev=9,r.t0=r["catch"](0),console.log(r.t0),r.abrupt("return",Promise.resolve(!1));case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},updateToken:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].dispatch(f["a"].updateUser,e);case 2:localStorage.setItem(m["a"].tokenName,e.token),Object(g["b"])({type:p["f"].token,msg:e.token});case 4:case"end":return t.stop()}}),t)})))()},logout:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.removeItem(m["a"].tokenName),e.next=3,d["a"].dispatch(f["a"].updateUser,new v["a"]);case 3:return e.next=5,d["a"].dispatch(f["a"].updateTasks,[]);case 5:return e.next=7,d["a"].dispatch(f["a"].updateMessages,[]);case 7:return e.abrupt("return",Promise.resolve(!0));case 8:case"end":return e.stop()}}),e)})))()},register:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u(e);case 3:return r=t.sent,Object(l["a"])(r.msg),t.abrupt("return",Promise.resolve(r.code===p["g"].success));case 8:return t.prev=8,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(!1));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},loginByGithub:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(e);case 3:return r=t.sent,t.abrupt("return",Promise.resolve(r.data));case 7:return t.prev=7,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(null));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},"935e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("van-nav-bar",{attrs:{"left-text":"注册","left-arrow":""},on:{"click-left":e.onNavBarClickLeft}}),r("van-field",{attrs:{autofocus:"",clearable:"",placeholder:"请输入账号"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("van-field",{attrs:{type:"password",clearable:"",autosize:"",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("br"),r("br"),r("van-button",{staticClass:"login-btn",attrs:{size:"large",type:"primary"},on:{click:e.onRegBtnClick}},[e._v("注册")])],1)},a=[],c=(r("b0c0"),r("96cf"),r("1da1")),s=r("2b0e"),o=r("9f48"),u=r("d399"),i=(r("e7e5"),r("633d")),l=s["a"].extend({name:"register",data:function(){return{name:"",password:""}},methods:{onRegBtnClick:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=e.name,n=e.password,""!==r){t.next=4;break}throw new o["a"]("请输入账号");case 4:if(""!==n){t.next=6;break}throw new o["a"]("请输入密码");case 6:return u["a"].loading("注册中..."),t.next=9,i["a"].register({name:r,password:n});case 9:a=t.sent,a&&(u["a"].clear(!0),e.$router.back()),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),t.t0 instanceof o["a"]&&Object(u["a"])(t.t0.msg);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}}),p=l,d=r("2877"),f=Object(d["a"])(p,n,a,!1,null,"62610865",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-0eee12e6.bd068b5f.js.map