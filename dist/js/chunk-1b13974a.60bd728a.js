(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b13974a"],{"4ae1a":function(t,e,a){},"5f1a":function(t,e,a){"use strict";a("68ef"),a("9d70"),a("3743"),a("9b7e")},"96b0":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return o}));var n=a("90c6");function i(t,e){var a=-1,n=Array(t);while(++a<t)n[a]=e(a);return n}function r(t){if(!t)return 0;while(Object(n["a"])(parseInt(t,10))){if(!(t.length>1))return 0;t=t.slice(1)}return parseInt(t,10)}function o(t,e){return 32-new Date(t,e-1,32).getDate()}},"9b7e":function(t,e,a){},a15b:function(t,e,a){"use strict";var n=a("23e7"),i=a("44ad"),r=a("fc6a"),o=a("a640"),u=[].join,l=i!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(t){return u.call(r(this),void 0===t?",":t)}})},a3e2:function(t,e,a){"use strict";var n=a("2638"),i=a.n(n),r=a("d282"),o=a("ba31"),u=a("b1d2"),l=a("ad06"),c=Object(r["a"])("tag"),s=c[0],m=c[1];function h(t,e,a,n){var r,c,s=e.type,h=e.mark,p=e.plain,b=e.color,f=e.round,d=e.size,v=p?"color":"backgroundColor",g=(r={},r[v]=b,r);e.textColor&&(g.color=e.textColor);var y={mark:h,plain:p,round:f};d&&(y[d]=d);var k=e.closeable&&t(l["a"],{attrs:{name:"cross"},class:m("close"),on:{click:function(t){t.stopPropagation(),Object(o["a"])(n,"close")}}});return t("transition",{attrs:{name:e.closeable?"van-fade":null}},[t("span",i()([{key:"content",style:g,class:[m([y,s]),(c={},c[u["c"]]=p,c)]},Object(o["b"])(n,!0)]),[null==a.default?void 0:a.default(),k])])}h.props={size:String,mark:Boolean,color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean,type:{type:String,default:"default"}},e["a"]=s(h)},a4e6:function(t,e,a){"use strict";var n=a("4ae1a"),i=a.n(n);i.a},bad1:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("90c6");function i(t){return"[object Date]"===Object.prototype.toString.call(t)&&!Object(n["a"])(t.getTime())}},bee2:function(t,e,a){"use strict";function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}a.d(e,"a",(function(){return i}))},d1cf:function(t,e,a){"use strict";a("68ef"),a("e3b3"),a("a526")},ee83:function(t,e,a){"use strict";var n=a("c31d"),i=a("d282"),r=a("68ed"),o=a("482d"),u=a("96b0"),l=a("1b10"),c=a("f253"),s=Object(n["a"])({},l["a"],{value:null,filter:Function,showToolbar:{type:Boolean,default:!0},formatter:{type:Function,default:function(t,e){return e}}}),m={data:function(){return{innerValue:this.formatValue(this.value)}},computed:{originColumns:function(){var t=this;return this.ranges.map((function(e){var a=e.type,n=e.range,i=Object(u["c"])(n[1]-n[0]+1,(function(t){var e=Object(r["b"])(n[0]+t);return e}));return t.filter&&(i=t.filter(a,i)),{type:a,values:i}}))},columns:function(){var t=this;return this.originColumns.map((function(e){return{values:e.values.map((function(a){return t.formatter(e.type,a)}))}}))}},watch:{columns:"updateColumnValue",innerValue:function(t){this.$emit("input",t)}},mounted:function(){var t=this;this.updateColumnValue(),this.$nextTick((function(){t.updateInnerValue()}))},methods:{getPicker:function(){return this.$refs.picker},onConfirm:function(){this.$emit("confirm",this.innerValue)},onCancel:function(){this.$emit("cancel")}},render:function(){var t=this,e=arguments[0],a={};return Object.keys(l["a"]).forEach((function(e){a[e]=t[e]})),e(c["a"],{ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:this.onCancel},props:Object(n["a"])({},a)})}},h=Object(i["a"])("time-picker"),p=h[0],b=p({mixins:[m],props:Object(n["a"])({},s,{minHour:{type:[Number,String],default:0},maxHour:{type:[Number,String],default:23},minMinute:{type:[Number,String],default:0},maxMinute:{type:[Number,String],default:59}}),computed:{ranges:function(){return[{type:"hour",range:[+this.minHour,+this.maxHour]},{type:"minute",range:[+this.minMinute,+this.maxMinute]}]}},watch:{filter:"updateInnerValue",minHour:"updateInnerValue",maxHour:"updateInnerValue",minMinute:"updateInnerValue",maxMinute:"updateInnerValue",value:function(t){t=this.formatValue(t),t!==this.innerValue&&(this.innerValue=t,this.updateColumnValue())}},methods:{formatValue:function(t){t||(t=Object(r["b"])(this.minHour)+":"+Object(r["b"])(this.minMinute));var e=t.split(":"),a=e[0],n=e[1];return a=Object(r["b"])(Object(o["a"])(a,this.minHour,this.maxHour)),n=Object(r["b"])(Object(o["a"])(n,this.minMinute,this.maxMinute)),a+":"+n},updateInnerValue:function(){var t=this.getPicker().getIndexes(),e=t[0],a=t[1],n=this.originColumns,i=n[0],r=n[1],o=i.values[e]||i.values[0],u=r.values[a]||r.values[0];this.innerValue=this.formatValue(o+":"+u),this.updateColumnValue()},onChange:function(t){var e=this;this.updateInnerValue(),this.$nextTick((function(){e.$nextTick((function(){e.$emit("change",t)}))}))},updateColumnValue:function(){var t=this,e=this.formatter,a=this.innerValue.split(":"),n=[e("hour",a[0]),e("minute",a[1])];this.$nextTick((function(){t.getPicker().setValues(n)}))}}}),f=a("bad1"),d=(new Date).getFullYear(),v=Object(i["a"])("date-picker"),g=v[0],y=g({mixins:[m],props:Object(n["a"])({},s,{type:{type:String,default:"datetime"},minDate:{type:Date,default:function(){return new Date(d-10,0,1)},validator:f["a"]},maxDate:{type:Date,default:function(){return new Date(d+10,11,31)},validator:f["a"]}}),watch:{filter:"updateInnerValue",minDate:"updateInnerValue",maxDate:"updateInnerValue",value:function(t){t=this.formatValue(t),t.valueOf()!==this.innerValue.valueOf()&&(this.innerValue=t)}},computed:{ranges:function(){var t=this.getBoundary("max",this.innerValue),e=t.maxYear,a=t.maxDate,n=t.maxMonth,i=t.maxHour,r=t.maxMinute,o=this.getBoundary("min",this.innerValue),u=o.minYear,l=o.minDate,c=o.minMonth,s=o.minHour,m=o.minMinute,h=[{type:"year",range:[u,e]},{type:"month",range:[c,n]},{type:"day",range:[l,a]},{type:"hour",range:[s,i]},{type:"minute",range:[m,r]}];return"date"===this.type&&h.splice(3,2),"year-month"===this.type&&h.splice(2,3),h}},methods:{formatValue:function(t){return Object(f["a"])(t)||(t=this.minDate),t=Math.max(t,this.minDate.getTime()),t=Math.min(t,this.maxDate.getTime()),new Date(t)},getBoundary:function(t,e){var a,n=this[t+"Date"],i=n.getFullYear(),r=1,o=1,l=0,c=0;return"max"===t&&(r=12,o=Object(u["a"])(e.getFullYear(),e.getMonth()+1),l=23,c=59),e.getFullYear()===i&&(r=n.getMonth()+1,e.getMonth()+1===r&&(o=n.getDate(),e.getDate()===o&&(l=n.getHours(),e.getHours()===l&&(c=n.getMinutes())))),a={},a[t+"Year"]=i,a[t+"Month"]=r,a[t+"Date"]=o,a[t+"Hour"]=l,a[t+"Minute"]=c,a},updateInnerValue:function(){var t,e=this,a=this.getPicker().getIndexes(),n=function(t){var n=e.originColumns[t].values;return Object(u["b"])(n[a[t]])},i=n(0),r=n(1),o=Object(u["a"])(i,r);t="year-month"===this.type?1:n(2),t=t>o?o:t;var l=0,c=0;"datetime"===this.type&&(l=n(3),c=n(4));var s=new Date(i,r-1,t,l,c);this.innerValue=this.formatValue(s)},onChange:function(t){var e=this;this.updateInnerValue(),this.$nextTick((function(){e.$nextTick((function(){e.$emit("change",t)}))}))},updateColumnValue:function(){var t=this,e=this.innerValue,a=this.formatter,n=[a("year",""+e.getFullYear()),a("month",Object(r["b"])(e.getMonth()+1)),a("day",Object(r["b"])(e.getDate()))];"datetime"===this.type&&n.push(a("hour",Object(r["b"])(e.getHours())),a("minute",Object(r["b"])(e.getMinutes()))),"year-month"===this.type&&(n=n.slice(0,2)),this.$nextTick((function(){t.getPicker().setValues(n)}))}}}),k=Object(i["a"])("datetime-picker"),j=k[0],D=k[1];e["a"]=j({props:Object(n["a"])({},b.props,{},y.props),methods:{getPicker:function(){return this.$refs.root.getPicker()}},render:function(){var t=arguments[0],e="time"===this.type?b:y;return t(e,{ref:"root",class:D(),props:Object(n["a"])({},this.$props),on:Object(n["a"])({},this.$listeners)})}})},f3a9:function(t,e,a){"use strict";a.r(e);var n,i,r,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{"left-text":"添加习惯","left-arrow":""},on:{"click-left":t.onNavBarClickLeft}}),a("van-field",{attrs:{autofocus:"",clearable:"",label:"习惯名称",placeholder:"请输入习惯名称"},on:{input:t.onHabitTitleInput},model:{value:t.habit.title,callback:function(e){t.$set(t.habit,"title",e)},expression:"habit.title"}}),a("van-field",{attrs:{clearable:"",label:"习惯详情",autosize:"",type:"textarea",placeholder:"请输入习惯详情"},on:{input:t.onHabitDetailInput},model:{value:t.habit.detail,callback:function(e){t.$set(t.habit,"detail",e)},expression:"habit.detail"}}),a("van-cell",{attrs:{title:"提醒时间",value:t.habit.alarmTime,"is-link":""},on:{click:t.onHabitAlarmTimeClick}}),a("van-cell",{attrs:{title:"提醒日期","is-link":""},on:{click:t.onHabitAlarmDateClick}},[a("div",{attrs:{slot:"label"},slot:"label"},t._l(t.habit.alarmDate,(function(e){return a("van-tag",{key:e,staticClass:"date-tag",attrs:{type:"primary"}},[t._v("星期"+t._s(e))])})),1)]),a("van-cell",{attrs:{title:"习惯标签",center:"","value-class":"habit-label-value"}},[a("van-icon",{attrs:{slot:"right-icon",name:"add-o",size:20},on:{click:t.onAddHabitLabelClick},slot:"right-icon"}),t._l(t.habit.label,(function(e){return a("van-tag",{key:e,staticClass:"habit-label",attrs:{type:"primary",mark:""}},[t._v(t._s(e))])}))],2),a("van-button",{staticClass:"position-bottom",attrs:{size:"large",type:"primary"},on:{click:t.onCreateHabitClick}},[t._v("添加")]),a("van-popup",{attrs:{round:"","close-icon-position":"top-left",position:"bottom",closeable:""},model:{value:t.isAlarmTimePopup,callback:function(e){t.isAlarmTimePopup=e},expression:"isAlarmTimePopup"}},[a("van-datetime-picker",{attrs:{type:"time",formatter:t.dateTimeFormatter},on:{confirm:t.onDateTimeConfirm},model:{value:t.currentDateTime,callback:function(e){t.currentDateTime=e},expression:"currentDateTime"}})],1),a("van-popup",{attrs:{round:"","close-icon-position":"top-left",position:"bottom",closeable:""},model:{value:t.isAlarmDatePopup,callback:function(e){t.isAlarmDatePopup=e},expression:"isAlarmDatePopup"}},[a("div",{staticClass:"date-tag-container"},t._l(["一","二","三","四","五","六","日"],(function(e){return a("van-tag",{key:e,staticClass:"date-tag",attrs:{size:"large",type:"primary",plain:!t.habit.alarmDate.includes(e)},on:{click:function(a){return t.onHabitDateTagClick(e)}}},[t._v("星期"+t._s(e))])})),1)]),a("van-popup",{staticStyle:{"background-color":"unset"},attrs:{position:"center"},model:{value:t.isLabelPopup,callback:function(e){t.isLabelPopup=e},expression:"isLabelPopup"}},[a("div",{staticClass:"habit-label-popup"},[a("van-field",{attrs:{autofocus:"",clearable:"",placeholder:"请输入标签"},on:{input:t.onHabitLabelInput},model:{value:t.habitLabel,callback:function(e){t.habitLabel=e},expression:"habitLabel"}}),a("br"),a("van-button",{attrs:{size:"large",type:"primary"},on:{click:t.onAddLabelClick}},[t._v("添加")])],1)])],1)},u=[],l=(a("99af"),a("4de4"),a("caad"),a("a15b"),a("b0c0"),a("2532"),a("96cf"),a("1da1")),c=a("ade3"),s=a("2b0e"),m=a("d4ec"),h=a("bee2"),p=a("93f3"),b=function(){function t(e,a,n,i,r,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:p["d"],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";Object(m["a"])(this,t),this.CreatedAt=l,this.DeletedAt=c,this.ID=u,this.UpdatedAt=s,this.alarmTime=e,this.detail=a,this.label=n,this.status=i,this.title=r,this.alarmDate=o}return Object(h["a"])(t,[{key:"validate",value:function(){return this.title?this.detail?this.alarmDate?"":"请选择提醒日期":"请输入习惯详情":"请输入习惯标题"}}]),t}(),f=b,d=a("ee83"),v=(a("d1cf"),a("a3e2")),g=(a("5f1a"),a("d399")),y=(a("e7e5"),a("d3b7"),{addHabit:function(t){return Promise.resolve({code:0,msg:""})}}),k=a("9f48"),j=new Date;(function(t){t["year"]="year",t["month"]="month",t["day"]="day",t["hour"]="hour",t["minute"]="minute"})(r||(r={}));var D=(n={},Object(c["a"])(n,r.year,"年"),Object(c["a"])(n,r.month,"月"),Object(c["a"])(n,r.day,"日"),Object(c["a"])(n,r.hour,"时"),Object(c["a"])(n,r.minute,"分"),n),O=s["a"].extend({name:"addHabit",data:function(){return{habit:new f(j.toLocaleTimeString(),"",[],p["c"].pending,"",[]),isAlarmTimePopup:!1,isAlarmDatePopup:!1,isLabelPopup:!1,habitLabel:"",currentDateTime:j.toTimeString()}},methods:{dateTimeFormatter:function(t,e){return"".concat(e).concat(D[t])},onDateTimeConfirm:function(t){this.isAlarmTimePopup=!1,this.habit.alarmTime=t},onHabitTitleInput:function(t){this.habit.title=t},onHabitDetailInput:function(t){this.habit.detail=t},onHabitAlarmTimeClick:function(){this.isAlarmTimePopup=!0},onHabitAlarmDateClick:function(){this.isAlarmDatePopup=!0},onAddHabitLabelClick:function(){this.isLabelPopup=!0},onCreateHabitClick:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r=null===(a=t.habit)||void 0===a||null===(n=a.label)||void 0===n?void 0:n.join("#"),o=null===(i=t.habit)||void 0===i?void 0:i.validate(),!o){e.next=5;break}throw new k["a"](o);case 5:return e.next=7,y.addHabit(Object.assign({},t.habit,{label:r}));case 7:u=e.sent,Object(g["a"])(u.code===p["f"].success?"添加成功":u.msg),u.code===p["f"].success&&setTimeout((function(){return t.$router.back()}),2e3),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0),e.t0 instanceof k["a"]&&Object(g["a"])(e.t0.msg);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},onHabitLabelInput:function(t){this.habitLabel=t},onAddLabelClick:function(){this.isLabelPopup=!1,this.habit.label.push(this.habitLabel),this.habitLabel=""},onHabitDateTagClick:function(t){this.habit.alarmDate.includes(t)?this.habit.alarmDate=this.habit.alarmDate.filter((function(e){return e!==t})):this.habit.alarmDate.push(t)}},components:(i={},Object(c["a"])(i,d["a"].name,d["a"]),Object(c["a"])(i,v["a"].name,v["a"]),i)}),x=O,C=(a("a4e6"),a("2877")),V=Object(C["a"])(x,o,u,!1,null,"7679e99c",null);e["default"]=V.exports}}]);
//# sourceMappingURL=chunk-1b13974a.60bd728a.js.map