(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b597e35"],{1435:function(e,t,r){},"330c":function(e,t,r){"use strict";var n=r("1435"),a=r.n(n);a.a},"633d":function(e,t,r){"use strict";r("d3b7"),r("96cf");var n=r("1da1"),a=(r("99af"),r("79f6")),c=r("0889"),u="".concat(a["a"],"/auth"),s=function(e){return c["a"].post("".concat(u,"/login"),e)},o=function(e){return c["a"].post("".concat(u,"/register"),e)},i=function(e){return c["a"].get("".concat(u,"/github/").concat(e))},p=r("d399"),l=(r("e7e5"),r("93f3")),f=r("0613"),d=r("fc60"),m=r("2de2"),g=r("458f"),v=r("2ce0");t["a"]={login:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s(e);case 3:return n=r.sent,Object(p["a"])(n.msg),n.code===l["h"].success&&t.updateToken(n.data),r.abrupt("return",Promise.resolve(n.code===l["h"].success));case 9:return r.prev=9,r.t0=r["catch"](0),console.log(r.t0),r.abrupt("return",Promise.resolve(!1));case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},updateToken:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].dispatch(d["a"].updateUser,e);case 2:localStorage.setItem(m["a"].tokenName,e.token),Object(v["c"])({type:l["g"].token,msg:e.token});case 4:case"end":return t.stop()}}),t)})))()},logout:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.removeItem(m["a"].tokenName),e.next=3,f["a"].dispatch(d["a"].updateUser,new g["a"]);case 3:return e.next=5,f["a"].dispatch(d["a"].updateTasks,[]);case 5:return e.next=7,f["a"].dispatch(d["a"].updateMessages,[]);case 7:return e.abrupt("return",Promise.resolve(!0));case 8:case"end":return e.stop()}}),e)})))()},register:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o(e);case 3:return r=t.sent,Object(p["a"])(r.msg),t.abrupt("return",Promise.resolve(r.code===l["h"].success));case 8:return t.prev=8,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(!1));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},loginByGithub:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(e);case 3:return r=t.sent,t.abrupt("return",Promise.resolve(r.data));case 7:return t.prev=7,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(null));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},8960:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("van-loading",{attrs:{size:"24px",vertical:""}},[e._v("登录中...")])],1)},a=[],c=(r("b0c0"),r("ac1f"),r("5319"),r("ade3")),u=(r("96cf"),r("1da1")),s=r("2b0e"),o=r("633d"),i=r("543e"),p=(r("68ef"),r("e3b3"),s["a"].extend({name:"githubLogin",created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$route.query.code,"string"===typeof r){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,o["a"].loginByGithub(r);case 5:if(n=t.sent,!n){t.next=10;break}return t.next=9,o["a"].updateToken(n);case 9:e.$router.replace("/task");case 10:case"end":return t.stop()}}),t)})))()},components:Object(c["a"])({},i["a"].name,i["a"])})),l=p,f=(r("330c"),r("2877")),d=Object(f["a"])(l,n,a,!1,null,"65b8ee42",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-3b597e35.6c8e10be.js.map