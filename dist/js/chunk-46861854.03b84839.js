(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46861854"],{"633d":function(e,t,n){"use strict";n("d3b7"),n("96cf");var r=n("1da1"),a=(n("99af"),n("79f6")),c=n("0889"),o="".concat(a["a"],"/auth"),s=function(e){return c["a"].post("".concat(o,"/login"),e)},u=function(e){return c["a"].post("".concat(o,"/register"),e)},i=function(e){return c["a"].get("".concat(o,"/github/").concat(e))},l=n("d399"),p=(n("e7e5"),n("93f3")),f=n("0613"),h=n("fc60"),m=n("2de2"),g=n("458f"),v=n("2ce0");t["a"]={login:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s(e);case 3:return r=n.sent,Object(l["a"])(r.msg),r.code===p["h"].success&&t.updateToken(r.data),n.abrupt("return",Promise.resolve(r.code===p["h"].success));case 9:return n.prev=9,n.t0=n["catch"](0),console.log(n.t0),n.abrupt("return",Promise.resolve(!1));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateToken:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].dispatch(h["a"].updateUser,e);case 2:localStorage.setItem(m["a"].tokenName,e.token),Object(v["c"])({type:p["g"].token,msg:e.token});case 4:case"end":return t.stop()}}),t)})))()},logout:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.removeItem(m["a"].tokenName),e.next=3,f["a"].dispatch(h["a"].updateUser,new g["a"]);case 3:return e.next=5,f["a"].dispatch(h["a"].updateTasks,[]);case 5:return e.next=7,f["a"].dispatch(h["a"].updateMessages,[]);case 7:return e.abrupt("return",Promise.resolve(!0));case 8:case"end":return e.stop()}}),e)})))()},register:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u(e);case 3:return n=t.sent,Object(l["a"])(n.msg),t.abrupt("return",Promise.resolve(n.code===p["h"].success));case 8:return t.prev=8,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(!1));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},loginByGithub:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(e);case 3:return n=t.sent,t.abrupt("return",Promise.resolve(n.data));case 7:return t.prev=7,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(null));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},c2b4:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{attrs:{"left-text":"设置","left-arrow":""},on:{"click-left":e.onNavBarClickLeft}}),n("van-cell",{attrs:{title:"更新缓存","is-link":""},on:{click:e.onCleanCacheClick}}),n("van-cell",{attrs:{title:"提醒灵敏度",value:"1min","is-link":""},on:{click:e.onSetRefreshRateCellClick}}),n("br"),n("br"),n("van-button",{attrs:{type:"primary",size:"large"},on:{click:e.onLogoutClick}},[e._v("退出登录")]),n("van-popup",{attrs:{closeable:"","close-icon-position":"top-left",round:"",position:"bottom"},model:{value:e.isSetRatePopup,callback:function(t){e.isSetRatePopup=t},expression:"isSetRatePopup"}},[n("van-picker",{attrs:{"show-toolbar":"",title:"选择刷新间隔(min)",columns:e.refreshRates},on:{confirm:e.onSetRefreshCfmClick}})],1)],1)},a=[],c=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),o=n("2b0e"),s=n("2241"),u=(n("e17f"),n("d399")),i=(n("e7e5"),n("633d")),l=n("afbc"),p=n("2ce0"),f=n("93f3"),h=n("bb3e"),m=o["a"].extend({name:"setting",data:function(){return{isSetRatePopup:!1,refreshRates:[1,5,10]}},methods:{cleanCache:function(){h["a"].update().then((function(){Object(u["a"])("更新成功")})).catch((function(e){console.log(e)}))},onCleanCacheClick:function(){s["a"].confirm({title:"提示",message:"确定更新缓存吗?"}).then(this.cleanCache).catch((function(){}))},onSetRefreshRateCellClick:function(){this.isSetRatePopup=!0},onSetRefreshCfmClick:function(e){this.isSetRatePopup=!1,Object(p["c"])({type:f["g"].setRefreshRate,msg:e})},onLogoutClick:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{s["a"].confirm({title:"提示",message:"确定退出登录吗?"}).then(Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].logout();case 2:if(n=t.sent,!n){t.next=6;break}return t.next=6,e.$router.replace(l["a"].task);case 6:case"end":return t.stop()}}),t)})))).catch((function(){}))}catch(n){console.log(n)}case 1:case"end":return t.stop()}}),t)})))()}}}),g=m,v=n("2877"),d=Object(v["a"])(g,r,a,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-46861854.03b84839.js.map