(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a3846e3"],{d302:function(t,a,e){},dbb6:function(t,a,e){"use strict";var i=e("d302"),n=e.n(i);n.a},f3a9:function(t,a,e){"use strict";e.r(a);var i,n,l,o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("van-nav-bar",{attrs:{"left-text":"添加习惯","left-arrow":""},on:{"click-left":t.onNavBarClickLeft}}),e("van-field",{attrs:{autofocus:"",clearable:"",label:"习惯名称",placeholder:"请输入习惯名称"},on:{input:t.onHabitTitleInput},model:{value:t.habit.title,callback:function(a){t.$set(t.habit,"title",a)},expression:"habit.title"}}),e("van-field",{attrs:{clearable:"",label:"习惯详情",autosize:"",type:"textarea",placeholder:"请输入习惯详情"},on:{input:t.onHabitDetailInput},model:{value:t.habit.detail,callback:function(a){t.$set(t.habit,"detail",a)},expression:"habit.detail"}}),e("van-cell",{attrs:{title:"提醒时间",value:t.habit.alarmTime,"is-link":""},on:{click:t.onHabitAlarmTimeClick}}),e("van-cell",{attrs:{title:"提醒日期","is-link":""},on:{click:t.onHabitAlarmDateClick}},[e("div",{attrs:{slot:"label"},slot:"label"},t._l(t.habit.alarmDate,(function(a){return e("van-tag",{key:a,staticClass:"date-tag",attrs:{type:"primary"}},[t._v("星期"+t._s(a))])})),1)]),e("van-cell",{attrs:{title:"习惯标签",center:"","value-class":"habit-label-value"}},[e("van-icon",{attrs:{slot:"right-icon",name:"add-o",size:20},on:{click:t.onAddHabitLabelClick},slot:"right-icon"}),t._l(t.habit.label,(function(a){return e("van-tag",{key:a,staticClass:"habit-label",attrs:{type:"primary",mark:""}},[t._v(t._s(a))])}))],2),e("van-button",{staticClass:"position-bottom",attrs:{size:"large",type:"primary"},on:{click:t.onCreateHabitClick}},[t._v("添加")]),e("van-popup",{attrs:{round:"","close-icon-position":"top-left",position:"bottom",closeable:""},model:{value:t.isAlarmTimePopup,callback:function(a){t.isAlarmTimePopup=a},expression:"isAlarmTimePopup"}},[e("van-datetime-picker",{attrs:{type:"time",formatter:t.dateTimeFormatter},on:{confirm:t.onDateTimeConfirm},model:{value:t.currentDateTime,callback:function(a){t.currentDateTime=a},expression:"currentDateTime"}})],1),e("van-popup",{attrs:{round:"","close-icon-position":"top-left",position:"bottom",closeable:""},model:{value:t.isAlarmDatePopup,callback:function(a){t.isAlarmDatePopup=a},expression:"isAlarmDatePopup"}},[e("div",{staticClass:"date-tag-container"},t._l(["一","二","三","四","五","六","日"],(function(a){return e("van-tag",{key:a,staticClass:"date-tag",attrs:{size:"large",type:"primary",plain:!t.habit.alarmDate.includes(a)},on:{click:function(e){return t.onHabitDateTagClick(a)}}},[t._v("星期"+t._s(a))])})),1)]),e("van-popup",{staticStyle:{"background-color":"unset"},attrs:{position:"center"},model:{value:t.isLabelPopup,callback:function(a){t.isLabelPopup=a},expression:"isLabelPopup"}},[e("div",{staticClass:"habit-label-popup"},[e("van-field",{attrs:{autofocus:"",clearable:"",placeholder:"请输入标签"},on:{input:t.onHabitLabelInput},model:{value:t.habitLabel,callback:function(a){t.habitLabel=a},expression:"habitLabel"}}),e("br"),e("van-button",{attrs:{size:"large",type:"primary"},on:{click:t.onAddLabelClick}},[t._v("添加")])],1)])],1)},r=[],s=(e("99af"),e("4de4"),e("caad"),e("a15b"),e("b0c0"),e("2532"),e("96cf"),e("1da1")),c=e("ade3"),u=e("2b0e"),b=e("d4ec"),p=e("bee2"),d=e("93f3"),m=function(){function t(a,e,i,n,l,o){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d["d"],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";Object(b["a"])(this,t),this.CreatedAt=s,this.DeletedAt=c,this.ID=r,this.UpdatedAt=u,this.alarmTime=a,this.detail=e,this.label=i,this.status=n,this.title=l,this.alarmDate=o}return Object(p["a"])(t,[{key:"validate",value:function(){return this.title?this.detail?this.alarmDate?"":"请选择提醒日期":"请输入习惯详情":"请输入习惯标题"}}]),t}(),h=m,f=e("ee83"),v=(e("d1cf"),e("a3e2")),k=(e("5f1a"),e("d399")),g=(e("e7e5"),e("d3b7"),{addHabit:function(t){return Promise.resolve({code:0,msg:""})}}),D=e("9f48"),T=new Date;(function(t){t["year"]="year",t["month"]="month",t["day"]="day",t["hour"]="hour",t["minute"]="minute"})(l||(l={}));var C=(i={},Object(c["a"])(i,l.year,"年"),Object(c["a"])(i,l.month,"月"),Object(c["a"])(i,l.day,"日"),Object(c["a"])(i,l.hour,"时"),Object(c["a"])(i,l.minute,"分"),i),y=u["a"].extend({name:"addHabit",data:function(){return{habit:new h(T.toLocaleTimeString(),"",[],d["c"].pending,"",[]),isAlarmTimePopup:!1,isAlarmDatePopup:!1,isLabelPopup:!1,habitLabel:"",currentDateTime:T.toTimeString()}},methods:{dateTimeFormatter:function(t,a){return"".concat(a).concat(C[t])},onDateTimeConfirm:function(t){this.isAlarmTimePopup=!1,this.habit.alarmTime=t},onHabitTitleInput:function(t){this.habit.title=t},onHabitDetailInput:function(t){this.habit.detail=t},onHabitAlarmTimeClick:function(){this.isAlarmTimePopup=!0},onHabitAlarmDateClick:function(){this.isAlarmDatePopup=!0},onAddHabitLabelClick:function(){this.isLabelPopup=!0},onCreateHabitClick:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e,i,n,l,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,l=null===(e=t.habit)||void 0===e||null===(i=e.label)||void 0===i?void 0:i.join("#"),o=null===(n=t.habit)||void 0===n?void 0:n.validate(),!o){a.next=5;break}throw new D["a"](o);case 5:return a.next=7,g.addHabit(Object.assign({},t.habit,{label:l}));case 7:r=a.sent,Object(k["a"])(r.code===d["e"].success?"添加成功":r.msg),r.code===d["e"].success&&setTimeout((function(){return t.$router.back()}),2e3),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](0),console.log(a.t0),a.t0 instanceof D["a"]&&Object(k["a"])(a.t0.msg);case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))()},onHabitLabelInput:function(t){this.habitLabel=t},onAddLabelClick:function(){this.isLabelPopup=!1,this.habit.label.push(this.habitLabel),this.habitLabel=""},onHabitDateTagClick:function(t){this.habit.alarmDate.includes(t)?this.habit.alarmDate=this.habit.alarmDate.filter((function(a){return a!==t})):this.habit.alarmDate.push(t)}},components:(n={},Object(c["a"])(n,f["a"].name,f["a"]),Object(c["a"])(n,v["a"].name,v["a"]),n)}),A=y,L=(e("dbb6"),e("2877")),H=Object(L["a"])(A,o,r,!1,null,null,null);a["default"]=H.exports}}]);
//# sourceMappingURL=chunk-4a3846e3.c1852eb5.js.map