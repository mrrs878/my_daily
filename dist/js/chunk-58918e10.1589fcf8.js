(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58918e10"],{"0a52":function(e,t,n){},5326:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{attrs:{"left-text":"登录","left-arrow":""},on:{"click-left":e.onNavBarClickLeft}}),n("div",{staticClass:"login-info-container"},[n("van-field",{attrs:{autofocus:"",clearable:"",placeholder:"请输入账号"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("van-field",{attrs:{type:"password",clearable:"",autosize:"",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("br"),n("div",{staticClass:"auth-action-container padding-h"},[n("span",{on:{click:function(t){return e.onAuthActionClick("forgetPwd")}}},[e._v("忘记密码?")]),n("span",{on:{click:function(t){return e.onAuthActionClick("register")}}},[e._v("注册")])]),n("br"),n("br"),n("van-button",{staticClass:"login-btn",attrs:{size:"large",type:"primary"},on:{click:e.onLoginBtnClick}},[e._v("登录")])],1)],1)},a=[],c=(n("b0c0"),n("96cf"),n("1da1")),o=n("2b0e"),s=n("9f48"),i=n("d399"),u=(n("e7e5"),n("633d")),l=n("afbc"),p=o["a"].extend({name:"login",data:function(){return{name:"",password:""}},methods:{onLoginBtnClick:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.name,r=e.password,""!==n){t.next=4;break}throw new s["a"]("请输入账号");case 4:if(""!==r){t.next=6;break}throw new s["a"]("请输入密码");case 6:return i["a"].loading("登录中..."),t.next=9,u["a"].login({name:n,password:r});case 9:a=t.sent,a&&(i["a"].clear(!0),e.$router.back()),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),t.t0 instanceof s["a"]&&Object(i["a"])(t.t0.msg);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},onAuthActionClick:function(e){this.$router.push("forgetPwd"===e?l["a"].forgetPwd:l["a"].register)}}}),d=p,f=(n("e20c"),n("2877")),v=Object(f["a"])(d,r,a,!1,null,"be9ff9dc",null);t["default"]=v.exports},"633d":function(e,t,n){"use strict";n("d3b7"),n("96cf");var r=n("1da1"),a=n("79f6"),c=n("0889"),o="".concat(a["a"],"/auth"),s=function(e){return c["a"].post("".concat(o,"/login"),e)},i=function(e){return c["a"].post("".concat(o,"/register"),e)},u=n("d399"),l=(n("e7e5"),n("93f3")),p=n("0613"),d=n("fc60"),f=n("2de2"),v=n("458f");t["a"]={login:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s(e);case 3:if(n=t.sent,Object(u["a"])(n.msg),n.code!==l["e"].success){t.next=9;break}return t.next=8,p["a"].dispatch(d["a"].updateUser,n.data);case 8:localStorage.setItem(f["a"].tokenName,n.data.token);case 9:return t.abrupt("return",Promise.resolve(n.code===l["e"].success));case 12:return t.prev=12,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(!1));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},logout:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.removeItem(f["a"].tokenName),e.next=3,p["a"].dispatch(d["a"].updateUser,new v["a"]);case 3:return e.next=5,p["a"].dispatch(d["a"].updateTasks,[]);case 5:return e.abrupt("return",Promise.resolve(!0));case 6:case"end":return e.stop()}}),e)})))()},register:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(e);case 3:return n=t.sent,Object(u["a"])(n.msg),t.abrupt("return",Promise.resolve(n.code===l["e"].success));case 8:return t.prev=8,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(!1));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},e20c:function(e,t,n){"use strict";var r=n("0a52"),a=n.n(r);a.a}}]);
//# sourceMappingURL=chunk-58918e10.1589fcf8.js.map