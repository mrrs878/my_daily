{"version":3,"sources":["webpack:///./src/api/auth.ts","webpack:///./src/module/auth.ts","webpack:///./src/views/auth/Register.vue?8e09","webpack:///./src/views/auth/Register.vue","webpack:///./src/views/auth/Register.vue?2bf5","webpack:///./src/views/auth/Register.vue?9eb2"],"names":["LOGIN_API","data","ajax","post","login","res","msg","code","success","store","dispatch","updateUser","localStorage","setItem","tokenName","token","Promise","resolve","console","log","logout","removeItem","User","updateTasks","register","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onNavBarClickLeft","model","value","callback","$$v","name","expression","password","onRegBtnClick","_v","staticRenderFns","extend","methods","ToastError","loading","clear","$router","back","component"],"mappings":"8KAKMA,EAAY,GAAH,OAAM,OAAN,SAEF,EAAQ,SAACC,GAAD,OAAoDC,EAAA,KAAKC,KAAL,UAAcH,EAAd,UAAkCC,IAC9F,EAAW,SAACA,GAAD,OAAoDC,EAAA,KAAKC,KAAL,UAAcH,EAAd,aAAqCC,I,oFCClG,QACPG,MADO,SACAH,GAAe,4KAEN,EAAMA,GAFA,UAElBI,EAFkB,OAGxB,eAAMA,EAAIC,KACND,EAAIE,OAAS,OAASC,QAJF,gCAKhBC,EAAA,KAAMC,SAAS,OAAUC,WAAYN,EAAIJ,MALzB,OAMtBW,aAAaC,QAAQ,OAAOC,UAAWT,EAAIJ,KAAKc,OAN1B,gCAQjBC,QAAQC,QAAQZ,EAAIE,OAAS,OAASC,UARrB,4CAUxBU,QAAQC,IAAR,MAVwB,kBAWjBH,QAAQC,SAAQ,IAXC,6DActBG,OAfO,WAeD,oJACVR,aAAaS,WAAW,OAAOP,WADrB,SAEJL,EAAA,KAAMC,SAAS,OAAUC,WAAY,IAAIW,EAAA,MAFrC,uBAGJb,EAAA,KAAMC,SAAS,OAAUa,YAAa,IAHlC,gCAIHP,QAAQC,SAAQ,IAJb,8CAMNO,SArBO,SAqBGvB,GAAe,4KAET,EAASA,GAFA,cAErBI,EAFqB,OAG3B,eAAMA,EAAIC,KAHiB,kBAIpBU,QAAQC,QAAQZ,EAAIE,OAAS,OAASC,UAJlB,0CAM3BU,QAAQC,IAAR,MAN2B,kBAOpBH,QAAQC,SAAQ,IAPI,8D,2CC9BjC,IAAIQ,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,YAAY,KAAK,aAAa,IAAIC,GAAG,CAAC,aAAaR,EAAIS,qBAAqBL,EAAG,YAAY,CAACG,MAAM,CAAC,UAAY,GAAG,UAAY,GAAG,YAAc,SAASG,MAAM,CAACC,MAAOX,EAAQ,KAAEY,SAAS,SAAUC,GAAMb,EAAIc,KAAKD,GAAKE,WAAW,UAAUX,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAW,UAAY,GAAG,SAAW,GAAG,YAAc,SAASG,MAAM,CAACC,MAAOX,EAAY,SAAEY,SAAS,SAAUC,GAAMb,EAAIgB,SAASH,GAAKE,WAAW,cAAcX,EAAG,MAAMA,EAAG,MAAMA,EAAG,aAAa,CAACE,YAAY,YAAYC,MAAM,CAAC,KAAO,QAAQ,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIiB,gBAAgB,CAACjB,EAAIkB,GAAG,SAAS,IACttBC,EAAkB,G,8FCgBP,SAAIC,OAAO,CACxBN,KAAM,WACNvC,KAAM,iBAAO,CACXuC,KAAM,GACNE,SAAU,KAEZK,QAAS,CACDJ,cADC,WACY,8KAEPH,EAAmB,EAAnBA,KAAME,EAAa,EAAbA,SACD,KAATF,EAHW,sBAGQ,IAAIQ,EAAA,KAAW,SAHvB,UAIE,KAAbN,EAJW,sBAIY,IAAIM,EAAA,KAAW,SAJ3B,cAKf,OAAMC,QAAQ,UALC,SAMG,OAAWzB,SAAS,CAAEgB,OAAME,aAN/B,OAMTrC,EANS,OAOXA,IACF,OAAM6C,OAAM,GACZ,EAAKC,QAAQC,QATA,qDAYX,gBAAaJ,EAAA,MAAY,eAAM,KAAE1C,KAZtB,gECxB8U,I,YCOjW+C,EAAY,eACd,EACA5B,EACAoB,GACA,EACA,KACA,WACA,MAIa,aAAAQ,E","file":"js/chunk-5f889076.22410514.js","sourcesContent":["import { BASE_API } from './index'\r\nimport { AjaxResponseI, LoginReqI } from '@/interface/ajax'\r\nimport ajax from '@/util/ajax'\r\nimport { UserI } from '@/interface/model'\r\n\r\nconst LOGIN_API = `${BASE_API}/auth`\r\n\r\nexport const LOGIN = (data: LoginReqI): Promise<AjaxResponseI<UserI>> => ajax.post(`${ LOGIN_API }/login`, data)\r\nexport const REGISTER = (data: LoginReqI): Promise<AjaxResponseI<UserI>> => ajax.post(`${ LOGIN_API }/register`, data)\r\n","import { LoginReqI } from '@/interface/ajax'\r\nimport { LOGIN, REGISTER } from '@/api/auth'\r\nimport { Toast } from 'vant'\r\nimport { RES_CODE } from '@/constant'\r\nimport store from '@/store'\r\nimport { ACTIONS_E } from '@/store/actions'\r\nimport CONFIG from '@/config'\r\nimport User from '@/models/User'\r\n\r\nexport default {\r\n  async login (data: LoginReqI) {\r\n    try {\r\n      const res = await LOGIN(data)\r\n      Toast(res.msg)\r\n      if (res.code === RES_CODE.success) {\r\n        await store.dispatch(ACTIONS_E.updateUser, res.data)\r\n        localStorage.setItem(CONFIG.tokenName, res.data.token)\r\n      }\r\n      return Promise.resolve(res.code === RES_CODE.success)\r\n    } catch (e) {\r\n      console.log(e)\r\n      return Promise.resolve(false)\r\n    }\r\n  },\r\n  async logout () {\r\n    localStorage.removeItem(CONFIG.tokenName)\r\n    await store.dispatch(ACTIONS_E.updateUser, new User())\r\n    await store.dispatch(ACTIONS_E.updateTasks, [])\r\n    return Promise.resolve(true)\r\n  },\r\n  async register (data: LoginReqI) {\r\n    try {\r\n      const res = await REGISTER(data)\r\n      Toast(res.msg)\r\n      return Promise.resolve(res.code === RES_CODE.success)\r\n    } catch (e) {\r\n      console.log(e)\r\n      return Promise.resolve(false)\r\n    }\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('van-nav-bar',{attrs:{\"left-text\":\"注册\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onNavBarClickLeft}}),_c('van-field',{attrs:{\"autofocus\":\"\",\"clearable\":\"\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"clearable\":\"\",\"autosize\":\"\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('br'),_c('br'),_c('van-button',{staticClass:\"login-btn\",attrs:{\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":_vm.onRegBtnClick}},[_vm._v(\"注册\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport ToastError from '@/models/ToastError'\r\nimport { Toast } from 'vant'\r\nimport AuthModule from '@/module/auth'\r\n\r\nexport default Vue.extend({\r\n  name: 'register',\r\n  data: () => ({\r\n    name: '',\r\n    password: ''\r\n  }),\r\n  methods: {\r\n    async onRegBtnClick () {\r\n      try {\r\n        const { name, password } = this\r\n        if (name === '') throw new ToastError('请输入账号')\r\n        if (password === '') throw new ToastError('请输入密码')\r\n        Toast.loading('注册中...')\r\n        const res = await AuthModule.register({ name, password })\r\n        if (res) {\r\n          Toast.clear(true)\r\n          this.$router.back()\r\n        }\r\n      } catch (e) {\r\n        if (e instanceof ToastError) Toast(e.msg)\r\n      }\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=62610865&scoped=true&\"\nimport script from \"./Register.vue?vue&type=script&lang=ts&\"\nexport * from \"./Register.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62610865\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}