(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6c4dce6"],{5326:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("van-nav-bar",{attrs:{"left-text":"登录","left-arrow":""},on:{"click-left":e.onNavBarClickLeft}}),r("div",{staticClass:"login-info-container"},[r("van-field",{attrs:{clearable:"",placeholder:"请输入账号"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("van-field",{attrs:{type:"password",clearable:"",autosize:"",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("br"),r("div",{staticClass:"auth-action-container padding-h"},[r("span",{on:{click:function(t){return e.onAuthActionClick("forgetPwd")}}},[e._v("忘记密码?")]),r("span",{on:{click:function(t){return e.onAuthActionClick("register")}}},[e._v("注册")])]),r("br"),r("br"),r("van-button",{staticClass:"login-btn",attrs:{size:"large",type:"primary"},on:{click:e.onLoginBtnClick}},[e._v("登录")])],1),r("div",{staticClass:"login-helpers"},[r("img",{staticClass:"login-type",attrs:{src:n("6bff"),alt:""},on:{click:e.onGithubLoginClick}})])],1)},a=[],c=(n("b0c0"),n("96cf"),n("1da1")),o=n("2b0e"),s=n("9f48"),i=n("d399"),u=(n("e7e5"),n("633d")),l=n("afbc"),p=o["a"].extend({name:"login",data:function(){return{name:"",password:""}},methods:{onLoginBtnClick:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.name,r=e.password,""!==n){t.next=4;break}throw new s["a"]("请输入账号");case 4:if(""!==r){t.next=6;break}throw new s["a"]("请输入密码");case 6:return i["a"].loading("登录中..."),t.next=9,u["a"].login({name:n,password:r});case 9:a=t.sent,a&&(i["a"].clear(!0),e.$router.back()),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),t.t0 instanceof s["a"]&&Object(i["a"])(t.t0.msg);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},onAuthActionClick:function(e){this.$router.push("forgetPwd"===e?l["a"].forgetPwd:l["a"].register)},onGithubLoginClick:function(){window.location.href="https://github.com/login/oauth/authorize?client_id=7b961b417e4b3fc83488&scope=user,public_repo"}}}),f=p,d=(n("f6f3"),n("2877")),b=Object(d["a"])(f,r,a,!1,null,"7ba369ad",null);t["default"]=b.exports},"633d":function(e,t,n){"use strict";n("d3b7"),n("96cf");var r=n("1da1"),a=(n("99af"),n("79f6")),c=n("0889"),o="".concat(a["a"],"/auth"),s=function(e){return c["a"].post("".concat(o,"/login"),e)},i=function(e){return c["a"].post("".concat(o,"/register"),e)},u=function(e){return c["a"].get("".concat(o,"/github/").concat(e))},l=n("d399"),p=(n("e7e5"),n("93f3")),f=n("0613"),d=n("fc60"),b=n("2de2"),g=n("458f"),m=n("2ce0");t["a"]={login:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s(e);case 3:return r=n.sent,Object(l["a"])(r.msg),r.code===p["f"].success&&t.updateToken(r.data),n.abrupt("return",Promise.resolve(r.code===p["f"].success));case 9:return n.prev=9,n.t0=n["catch"](0),console.log(n.t0),n.abrupt("return",Promise.resolve(!1));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateToken:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].dispatch(d["a"].updateUser,e);case 2:localStorage.setItem(b["a"].tokenName,e.token),Object(m["b"])({type:p["e"].token,msg:e.token});case 4:case"end":return t.stop()}}),t)})))()},logout:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.removeItem(b["a"].tokenName),e.next=3,f["a"].dispatch(d["a"].updateUser,new g["a"]);case 3:return e.next=5,f["a"].dispatch(d["a"].updateTasks,[]);case 5:return e.abrupt("return",Promise.resolve(!0));case 6:case"end":return e.stop()}}),e)})))()},register:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(e);case 3:return n=t.sent,Object(l["a"])(n.msg),t.abrupt("return",Promise.resolve(n.code===p["f"].success));case 8:return t.prev=8,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(!1));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},loginByGithub:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u(e);case 3:return n=t.sent,t.abrupt("return",Promise.resolve(n.data));case 7:return t.prev=7,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",Promise.resolve(null));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},"6bff":function(e,t,n){e.exports=n.p+"img/github.dc77bc7f.svg"},efa9:function(e,t,n){},f6f3:function(e,t,n){"use strict";var r=n("efa9"),a=n.n(r);a.a}}]);
//# sourceMappingURL=chunk-c6c4dce6.e3e20e68.js.map